# SuperAI 生产环境配置
# 生产环境专用配置文件 - 请确保所有敏感信息的安全性
# 创建时间: 2024-09-15
# 维护者: DevOps团队

# === 环境标识 ===
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# === 核心服务端口配置 ===
AGENT_PLANNER_PORT=8300
AGENT_EXECUTOR_PORT=8400
AGI_QWEN_SERVICE_PORT=8201
VLLM_SERVICE_PORT=8000

# === Redis配置 ===
REDIS_HOST=agi-redis-lb
REDIS_PORT=6379
# 生产环境必须使用强密码
REDIS_PASSWORD=${REDIS_PASSWORD_SECRET}
REDIS_DB=0
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_KEEPALIVE=true
REDIS_SOCKET_KEEPALIVE_OPTIONS={}

# === 监控服务配置 ===
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=30d
PROMETHEUS_STORAGE_RETENTION_SIZE=10GB
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
# 生产环境必须修改默认密码
GRAFANA_ADMIN_PASSWORD=${GRAFANA_ADMIN_PASSWORD_SECRET}

# === 负载均衡器配置 ===
HEALTH_CHECK_PROXY_PORT=8105
LEARNING_API_LB_PORT=8200
QWEN_LB_PORT=8202
SYNERGY_API_LB_PORT=8199

# === API密钥配置 (使用密钥管理) ===
TAVILY_API_KEY=${TAVILY_API_KEY_SECRET}
OPENAI_API_KEY=${OPENAI_API_KEY_SECRET}

# === 安全配置 (使用密钥管理) ===
SECRET_KEY=${SECRET_KEY_SECRET}
JWT_SECRET=${JWT_SECRET_SECRET}
JWT_EXPIRATION=1800
JWT_REFRESH_EXPIRATION=86400

# === 数据库配置 ===
DATABASE_URL=${DATABASE_URL_SECRET}
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30

# === 日志配置 ===
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s - %(pathname)s:%(lineno)d
LOG_FILE=/var/log/superai/superai.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=10
LOG_ROTATION=daily

# === 性能配置 ===
WORKER_TIMEOUT=300
WORKER_CONNECTIONS=2000
MAX_REQUESTS=10000
MAX_REQUESTS_JITTER=1000
KEEP_ALIVE=5

# === 生产环境安全配置 ===
FLASK_ENV=production
FLASK_DEBUG=false
WERKZEUG_DEBUG_PIN=off
SECURE_COOKIES=true
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Strict

# === 监控配置 ===
PROMETHEUS_METRICS_ENABLED=true
METRICS_PORT=8080
HEALTH_CHECK_INTERVAL=10
METRICS_RETENTION_DAYS=90

# === 事件总线配置 ===
EVENT_BUS_RETRY_ATTEMPTS=5
EVENT_BUS_RETRY_DELAY=2
EVENT_BUS_TIMEOUT=60
EVENT_BUS_MAX_RETRIES=10

# === 工具配置 ===
TOOL_EXECUTION_TIMEOUT=300
MAX_TOOL_RETRIES=5
TOOL_CACHE_ENABLED=true
TOOL_CACHE_TTL=3600

# === 生产特性开关 ===
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_PROFILING=false
ENABLE_MOCK_SERVICES=false
ENABLE_AUTO_RELOAD=false
ENABLE_RATE_LIMITING=true
ENABLE_REQUEST_LOGGING=true

# === 容器资源限制 ===
CONTAINER_MEMORY_LIMIT=1g
CONTAINER_CPU_LIMIT=1.0
CONTAINER_MEMORY_RESERVATION=512m
CONTAINER_CPU_RESERVATION=0.5

# === 网络配置 ===
MAX_CONNECTIONS_PER_HOST=100
CONNECTION_TIMEOUT=30
READ_TIMEOUT=60
WRITE_TIMEOUT=60

# === 备份和恢复配置 ===
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/var/backups/superai

# === 告警配置 ===
ALERT_WEBHOOK_URL=${ALERT_WEBHOOK_URL_SECRET}
ALERT_EMAIL_SMTP_HOST=${SMTP_HOST_SECRET}
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_USERNAME=${SMTP_USERNAME_SECRET}
ALERT_EMAIL_PASSWORD=${SMTP_PASSWORD_SECRET}
ALERT_EMAIL_FROM=alerts@superai.com
ALERT_EMAIL_TO=ops-team@superai.com
# SuperAI ä¾èµ–ç®¡ç†æœ€ä½³å®žè·µæŒ‡å— ðŸ“¦

## ðŸŽ¯ æŒ‡å—ç›®æ ‡

æœ¬æŒ‡å—æä¾›SuperAIé¡¹ç›®ä¾èµ–ç®¡ç†çš„æœ€ä½³å®žè·µï¼Œç¡®ä¿é¡¹ç›®çš„ç¨³å®šæ€§ã€å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

## ðŸ“‹ æ ¸å¿ƒåŽŸåˆ™

### ðŸ”’ å®‰å…¨ç¬¬ä¸€
- âœ… å®šæœŸå®¡è®¡ä¾èµ–å®‰å…¨æ¼æ´ž
- âœ… é¿å…ä½¿ç”¨å·²çŸ¥æœ‰å®‰å…¨é—®é¢˜çš„åŒ…
- âœ… å›ºå®šç”Ÿäº§çŽ¯å¢ƒä¾èµ–ç‰ˆæœ¬
- âŒ ç¦æ­¢ä½¿ç”¨æœªç»´æŠ¤çš„åºŸå¼ƒåŒ…

### ðŸŽ¯ ç»Ÿä¸€ç®¡ç†
- âœ… å•ä¸€ä¾èµ–æ–‡ä»¶ï¼š`requirements.txt`
- âœ… ç‰ˆæœ¬ä¸€è‡´æ€§ï¼šé¿å…å†²çª
- âœ… åˆ†ç±»æ¸…æ™°ï¼šæŒ‰åŠŸèƒ½ç»„ç»‡
- âŒ ç¦æ­¢æœåŠ¡çº§åˆ«çš„åˆ†æ•£ä¾èµ–

### âš¡ æ€§èƒ½ä¼˜åŒ–
- âœ… æœ€å°åŒ–ä¾èµ–æ•°é‡
- âœ… é€‰æ‹©è½»é‡çº§æ›¿ä»£æ–¹æ¡ˆ
- âœ… é¿å…é‡å¤åŠŸèƒ½çš„åŒ…
- âŒ ç¦æ­¢å¼•å…¥ä¸å¿…è¦çš„é‡åž‹æ¡†æž¶

## ðŸ“ ä¾èµ–æ–‡ä»¶ç»“æž„

### ðŸ—ï¸ ç»Ÿä¸€ä¾èµ–æž¶æž„

```
SuperAI/
â”œâ”€â”€ requirements.txt          # âœ… ç»Ÿä¸€ç”Ÿäº§ä¾èµ–
â”œâ”€â”€ requirements-dev.txt      # ðŸ”§ å¼€å‘ä¾èµ–ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ requirements-test.txt     # ðŸ§ª æµ‹è¯•ä¾èµ–ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ microservices/
    â”œâ”€â”€ agent-planner/
    â”‚   â””â”€â”€ requirements.txt  # âŒ å·²åºŸå¼ƒï¼Œä¸å†ä½¿ç”¨
    â””â”€â”€ agent-executor/
        â””â”€â”€ requirements.txt  # âŒ å·²åºŸå¼ƒï¼Œä¸å†ä½¿ç”¨
```

### ðŸ“ requirements.txt æ ‡å‡†æ ¼å¼

```python
# SuperAI ç»Ÿä¸€ä¾èµ–ç®¡ç†
# ç‰ˆæœ¬æ›´æ–°æ—¥æœŸï¼š2024-09-15
# ç»´æŠ¤è€…ï¼šDevOpså›¢é˜Ÿ

# === æ ¸å¿ƒæ¡†æž¶ ===
# Webæ¡†æž¶å’ŒWSGIæœåŠ¡å™¨
Flask==2.2.2              # Webåº”ç”¨æ¡†æž¶
Werkzeug==2.2.2           # WSGIå·¥å…·åº“
gunicorn==23.0.0          # ç”Ÿäº§çº§WSGIæœåŠ¡å™¨

# === æ•°æ®å­˜å‚¨å’Œé€šä¿¡ ===
# Rediså®¢æˆ·ç«¯å’ŒHTTPè¯·æ±‚
redis==4.5.5              # Rediså®¢æˆ·ç«¯
requests==2.31.0          # HTTPè¯·æ±‚åº“

# === å¤–éƒ¨APIé›†æˆ ===
# ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
tavily-python             # Tavily APIå®¢æˆ·ç«¯

# === å®‰å…¨å’Œè¯ä¹¦ ===
# SSL/TLSè¯ä¹¦ç®¡ç†
certifi==2024.7.4         # CAè¯ä¹¦åŒ…

# === å¼€å‘å’Œè°ƒè¯•å·¥å…·ï¼ˆå¯é€‰ï¼‰===
# å–æ¶ˆæ³¨é‡Šä»¥å¯ç”¨å¼€å‘å·¥å…·
# pytest==7.4.0          # æµ‹è¯•æ¡†æž¶
# black==23.7.0           # ä»£ç æ ¼å¼åŒ–
# flake8==6.0.0           # ä»£ç æ£€æŸ¥
# isort==5.12.0           # å¯¼å…¥æŽ’åº

# === å·²ç§»é™¤çš„ä¾èµ– ===
# gevent - ç§»é™¤åŽŸå› ï¼šä¸Žthreadingæ¨¡åž‹å†²çªï¼Œå­˜åœ¨greenleté”™è¯¯é£Žé™©
# eventlet - ç§»é™¤åŽŸå› ï¼šä¸Žgeventç±»ä¼¼çš„å¹¶å‘é—®é¢˜
# asyncio-related packages - ç§»é™¤åŽŸå› ï¼šå½“å‰ä½¿ç”¨threadingæ¨¡åž‹
```

## ðŸ”§ ä¾èµ–ç®¡ç†å·¥ä½œæµ

### âž• æ·»åŠ æ–°ä¾èµ–

**æ­¥éª¤1ï¼šè¯„ä¼°å¿…è¦æ€§**
```bash
# é—®é¢˜æ¸…å•
1. è¿™ä¸ªä¾èµ–æ˜¯å¦çœŸçš„å¿…è¦ï¼Ÿ
2. æ˜¯å¦æœ‰æ›´è½»é‡çº§çš„æ›¿ä»£æ–¹æ¡ˆï¼Ÿ
3. æ˜¯å¦ä¸ŽçŽ°æœ‰ä¾èµ–å†²çªï¼Ÿ
4. ç»´æŠ¤çŠ¶æ€å¦‚ä½•ï¼Ÿæœ€åŽæ›´æ–°æ—¶é—´ï¼Ÿ
5. å®‰å…¨è®°å½•å¦‚ä½•ï¼Ÿæ˜¯å¦æœ‰å·²çŸ¥æ¼æ´žï¼Ÿ
```

**æ­¥éª¤2ï¼šç‰ˆæœ¬é€‰æ‹©ç­–ç•¥**
```python
# âœ… æŽ¨èï¼šå›ºå®šä¸»è¦ç‰ˆæœ¬ï¼Œå…è®¸è¡¥ä¸æ›´æ–°
Flask>=2.2.0,<2.3.0

# âœ… ç”Ÿäº§çŽ¯å¢ƒï¼šå®Œå…¨å›ºå®šç‰ˆæœ¬
Flask==2.2.2

# âŒ é¿å…ï¼šè¿‡äºŽå®½æ¾çš„ç‰ˆæœ¬èŒƒå›´
Flask>=2.0.0

# âŒ ç¦æ­¢ï¼šæ— ç‰ˆæœ¬é™åˆ¶
Flask
```

**æ­¥éª¤3ï¼šæ·»åŠ æµç¨‹**
```bash
# 1. ç¼–è¾‘requirements.txt
notepad requirements.txt

# 2. æ·»åŠ ä¾èµ–ï¼ˆæŒ‰åˆ†ç±»æ·»åŠ åˆ°å¯¹åº”éƒ¨åˆ†ï¼‰
echo "new-package==1.0.0  # åŠŸèƒ½æè¿°" >> requirements.txt

# 3. æµ‹è¯•å…¼å®¹æ€§
pip install -r requirements.txt

# 4. é‡æ–°æž„å»ºåŸºç¡€é•œåƒ
.\build.ps1 -Target base

# 5. æµ‹è¯•æ‰€æœ‰æœåŠ¡
.\build.ps1
docker-compose restart agent-planner agent-executor

# 6. éªŒè¯åŠŸèƒ½
curl http://localhost:8300/health
curl http://localhost:8400/health
```

### ðŸ”„ æ›´æ–°çŽ°æœ‰ä¾èµ–

**å®‰å…¨æ›´æ–°æµç¨‹**
```bash
# 1. æ£€æŸ¥å®‰å…¨æ¼æ´ž
pip-audit

# 2. æŸ¥çœ‹å¯ç”¨æ›´æ–°
pip list --outdated

# 3. é€ä¸ªæ›´æ–°ï¼ˆé¿å…æ‰¹é‡æ›´æ–°ï¼‰
# ç¼–è¾‘requirements.txtï¼Œæ›´æ–°å•ä¸ªåŒ…ç‰ˆæœ¬

# 4. æµ‹è¯•å…¼å®¹æ€§
pip install -r requirements.txt
python -m pytest  # å¦‚æžœæœ‰æµ‹è¯•

# 5. é‡æ–°æž„å»ºå’Œæµ‹è¯•
.\build.ps1 -Target base
.\build.ps1
```

**ç‰ˆæœ¬å‡çº§ç­–ç•¥**
```python
# ðŸŸ¢ å®‰å…¨è¡¥ä¸ï¼šç«‹å³æ›´æ–°
Flask==2.2.2 â†’ Flask==2.2.3

# ðŸŸ¡ å°ç‰ˆæœ¬æ›´æ–°ï¼šè°¨æ…Žæµ‹è¯•
Flask==2.2.2 â†’ Flask==2.3.0

# ðŸ”´ å¤§ç‰ˆæœ¬æ›´æ–°ï¼šå……åˆ†æµ‹è¯•å’Œè§„åˆ’
Flask==2.2.2 â†’ Flask==3.0.0
```

### âž– ç§»é™¤åºŸå¼ƒä¾èµ–

**ç§»é™¤æ£€æŸ¥æ¸…å•**
```bash
# 1. ç¡®è®¤ä¾èµ–æœªè¢«ä½¿ç”¨
grep -r "import package_name" .
grep -r "from package_name" .

# 2. æ£€æŸ¥é—´æŽ¥ä¾èµ–
pip show package_name

# 3. å®‰å…¨ç§»é™¤
# ä»Žrequirements.txtä¸­åˆ é™¤
# é‡æ–°æž„å»ºæµ‹è¯•

# 4. éªŒè¯ç³»ç»ŸåŠŸèƒ½
# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
```

## ðŸ›¡ï¸ å®‰å…¨æœ€ä½³å®žè·µ

### ðŸ” å®‰å…¨å®¡è®¡

**å®šæœŸå®‰å…¨æ£€æŸ¥**
```bash
# å®‰è£…å®‰å…¨å®¡è®¡å·¥å…·
pip install pip-audit safety

# æ£€æŸ¥å·²çŸ¥æ¼æ´ž
pip-audit
safety check

# æ£€æŸ¥è¿‡æœŸä¾èµ–
pip list --outdated
```

**å®‰å…¨ä¾èµ–é€‰æ‹©**
```python
# âœ… é€‰æ‹©æ ‡å‡†
1. æ´»è·ƒç»´æŠ¤ï¼ˆæœ€è¿‘6ä¸ªæœˆæœ‰æ›´æ–°ï¼‰
2. è‰¯å¥½çš„å®‰å…¨è®°å½•
3. å¤§åž‹ç¤¾åŒºæ”¯æŒ
4. å®˜æ–¹æˆ–çŸ¥åç»„ç»‡ç»´æŠ¤

# âŒ é¿å…æ ‡å‡†
1. é•¿æœŸæ— æ›´æ–°ï¼ˆ>1å¹´ï¼‰
2. å·²çŸ¥å®‰å…¨æ¼æ´žæœªä¿®å¤
3. ä¸ªäººç»´æŠ¤çš„å…³é”®ä¾èµ–
4. åŠŸèƒ½é‡å¤çš„åŒ…
```

### ðŸ”’ ç”Ÿäº§çŽ¯å¢ƒå®‰å…¨

**ç‰ˆæœ¬é”å®šç­–ç•¥**
```python
# ç”Ÿäº§çŽ¯å¢ƒï¼šå®Œå…¨é”å®š
Flask==2.2.2
redis==4.5.5
requests==2.31.0

# å¼€å‘çŽ¯å¢ƒï¼šå…è®¸è¡¥ä¸æ›´æ–°
Flask>=2.2.2,<2.3.0
redis>=4.5.5,<4.6.0
requests>=2.31.0,<2.32.0
```

## ðŸ“Š æ€§èƒ½ä¼˜åŒ–

### âš¡ ä¾èµ–æ€§èƒ½è€ƒè™‘

**é€‰æ‹©è½»é‡çº§æ›¿ä»£æ–¹æ¡ˆ**
```python
# âœ… è½»é‡çº§é€‰æ‹©
requests      # vs httpx (æ›´é‡)
Flask         # vs Django (æ›´é‡)
redis         # vs SQLAlchemy (å¯¹äºŽç®€å•KVå­˜å‚¨)

# âœ… é¿å…é‡å¤åŠŸèƒ½
# å¦‚æžœå·²æœ‰requestsï¼Œé¿å…æ·»åŠ urllib3
# å¦‚æžœå·²æœ‰Flaskï¼Œé¿å…æ·»åŠ å…¶ä»–Webæ¡†æž¶
```

**æž„å»ºæ—¶é—´ä¼˜åŒ–**
```python
# âœ… ä¼˜åŒ–ç­–ç•¥
1. ä½¿ç”¨é¢„ç¼–è¯‘çš„wheelåŒ…
2. é¿å…éœ€è¦ç¼–è¯‘çš„åŒ…ï¼ˆå¦‚æžœæœ‰æ›¿ä»£æ–¹æ¡ˆï¼‰
3. å›ºå®šç‰ˆæœ¬ä»¥æé«˜ç¼“å­˜å‘½ä¸­çŽ‡
4. æŒ‰å®‰è£…æ—¶é—´æŽ’åºï¼ˆå¸¸ç”¨çš„æ”¾å‰é¢ï¼‰
```

### ðŸ“¦ é•œåƒå¤§å°ä¼˜åŒ–

**ä¾èµ–å¤§å°è€ƒè™‘**
```python
# æ£€æŸ¥åŒ…å¤§å°
pip show package_name

# é€‰æ‹©ç­–ç•¥
# âœ… ä¼˜å…ˆé€‰æ‹©å°ä½“ç§¯åŒ…
# âœ… é¿å…åŒ…å«å¤§é‡ä¸éœ€è¦åŠŸèƒ½çš„åŒ…
# âœ… è€ƒè™‘ä½¿ç”¨åŒ…çš„å­æ¨¡å—
```

## ðŸ”„ CI/CD é›†æˆ

### ðŸ¤– è‡ªåŠ¨åŒ–æ£€æŸ¥

**GitHub Actions é›†æˆ**
```yaml
# .github/workflows/dependency-check.yml
name: Dependency Security Check

on:
  push:
    paths:
      - 'requirements.txt'
  schedule:
    - cron: '0 0 * * 1'  # æ¯å‘¨ä¸€æ£€æŸ¥

jobs:
  security-check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        pip install pip-audit safety
        pip install -r requirements.txt
    
    - name: Run security audit
      run: |
        pip-audit
        safety check
    
    - name: Check for outdated packages
      run: pip list --outdated
```

### ðŸ“ˆ ä¾èµ–ç›‘æŽ§

**ç›‘æŽ§æŒ‡æ ‡**
```python
# å…³é”®æŒ‡æ ‡
1. ä¾èµ–æ•°é‡è¶‹åŠ¿
2. å®‰å…¨æ¼æ´žæ•°é‡
3. è¿‡æœŸä¾èµ–æ¯”ä¾‹
4. æž„å»ºæ—¶é—´å½±å“
5. é•œåƒå¤§å°å˜åŒ–
```

## ðŸš¨ æ•…éšœæŽ’æŸ¥

### â— å¸¸è§ä¾èµ–é—®é¢˜

**ç‰ˆæœ¬å†²çªè§£å†³**
```bash
# é—®é¢˜ï¼špip dependency resolver error
# è§£å†³æ­¥éª¤ï¼š

# 1. æŸ¥çœ‹å†²çªè¯¦æƒ…
pip install -r requirements.txt --dry-run

# 2. ä½¿ç”¨ä¾èµ–æ ‘åˆ†æž
pip install pipdeptree
pipdeptree --warn conflict

# 3. æ‰‹åŠ¨è§£å†³å†²çª
# è°ƒæ•´requirements.txtä¸­çš„ç‰ˆæœ¬èŒƒå›´

# 4. æ¸…ç†ç¼“å­˜é‡è¯•
pip cache purge
pip install -r requirements.txt
```

**æž„å»ºå¤±è´¥æŽ’æŸ¥**
```bash
# é—®é¢˜ï¼šDockeræž„å»ºå¤±è´¥
# æŽ’æŸ¥æ­¥éª¤ï¼š

# 1. æ£€æŸ¥ä¾èµ–æ˜¯å¦å­˜åœ¨
pip index versions package_name

# 2. æ£€æŸ¥å¹³å°å…¼å®¹æ€§
# æŸäº›åŒ…å¯èƒ½ä¸æ”¯æŒç‰¹å®šå¹³å°

# 3. ä½¿ç”¨è¯¦ç»†æ—¥å¿—
docker build --progress=plain .

# 4. ä¸´æ—¶ç§»é™¤é—®é¢˜ä¾èµ–
# é€ä¸ªæŽ’æŸ¥å®šä½é—®é¢˜åŒ…
```

### ðŸ”§ è°ƒè¯•å·¥å…·

**æœ‰ç”¨çš„è°ƒè¯•å‘½ä»¤**
```bash
# æŸ¥çœ‹å·²å®‰è£…åŒ…
pip list
pip show package_name

# ä¾èµ–å…³ç³»åˆ†æž
pipdeptree
pipdeptree --reverse package_name

# æ£€æŸ¥åŒ…ä¿¡æ¯
pip index versions package_name
pip search package_name  # å·²åºŸå¼ƒï¼Œä½¿ç”¨PyPIç½‘ç«™

# æ¸…ç†å’Œé‡ç½®
pip cache purge
pip uninstall -y -r requirements.txt
pip install -r requirements.txt
```

## ðŸ“š å‚è€ƒèµ„æº

### ðŸ”— æœ‰ç”¨é“¾æŽ¥

- [PyPI - Python Package Index](https://pypi.org/)
- [pip-audit - å®‰å…¨å®¡è®¡å·¥å…·](https://github.com/pypa/pip-audit)
- [Safety - å®‰å…¨æ£€æŸ¥å·¥å…·](https://github.com/pyupio/safety)
- [pipdeptree - ä¾èµ–æ ‘åˆ†æž](https://github.com/tox-dev/pipdeptree)
- [Python Security Advisory Database](https://github.com/pypa/advisory-database)

### ðŸ“– æŽ¨èé˜…è¯»

- [Pythonä¾èµ–ç®¡ç†æœ€ä½³å®žè·µ](https://packaging.python.org/guides/)
- [Dockerå¤šé˜¶æ®µæž„å»ºä¼˜åŒ–](https://docs.docker.com/develop/dev-best-practices/)
- [å®¹å™¨å®‰å…¨æœ€ä½³å®žè·µ](https://snyk.io/blog/10-docker-image-security-best-practices/)

## âœ… æ£€æŸ¥æ¸…å•

### ðŸ“‹ ä¾èµ–æ·»åŠ æ£€æŸ¥æ¸…å•

- [ ] è¯„ä¼°ä¾èµ–å¿…è¦æ€§
- [ ] æ£€æŸ¥å®‰å…¨è®°å½•
- [ ] ç¡®è®¤ç»´æŠ¤çŠ¶æ€
- [ ] é€‰æ‹©åˆé€‚ç‰ˆæœ¬
- [ ] æµ‹è¯•å…¼å®¹æ€§
- [ ] æ›´æ–°æ–‡æ¡£
- [ ] é‡æ–°æž„å»ºæµ‹è¯•
- [ ] éªŒè¯åŠŸèƒ½æ­£å¸¸

### ðŸ“‹ å®šæœŸç»´æŠ¤æ£€æŸ¥æ¸…å•

- [ ] æ¯æœˆå®‰å…¨å®¡è®¡
- [ ] æ¯å­£åº¦ä¾èµ–æ›´æ–°
- [ ] æ¯åŠå¹´æž¶æž„è¯„ä¼°
- [ ] å¹´åº¦ä¾èµ–æ¸…ç†

---

**ðŸŽ¯ è®°ä½ï¼šè‰¯å¥½çš„ä¾èµ–ç®¡ç†æ˜¯é¡¹ç›®é•¿æœŸå¥åº·çš„åŸºçŸ³ï¼**

éµå¾ªè¿™äº›æœ€ä½³å®žè·µï¼Œå°†ç¡®ä¿SuperAIé¡¹ç›®çš„ç¨³å®šæ€§ã€å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
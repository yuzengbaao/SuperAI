# 使用SuperAI基础镜像
FROM superai-base:latest

# 切换到root用户进行安装
USER root

# 复制服务特定文件
COPY ./microservices/agent-planner/ ./microservices/agent-planner/

# 安装服务特定依赖（如果有）
# COPY ./microservices/agent-planner/requirements.txt service_requirements.txt
# RUN pip install --no-cache-dir -r service_requirements.txt

# 设置服务端口环境变量
ENV SERVICE_PORT=8300

# 切换回非root用户
USER superai

# Specify the command to run on container startup
WORKDIR /app/microservices/agent-planner
CMD ["gunicorn", "-c", "gunicorn.conf.py", "app:app"]

